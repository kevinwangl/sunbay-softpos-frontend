# 🧪 测试"发布新版本"功能

## 快速测试步骤

### 1. 启动应用
```bash
cd sunbay-softpos-frontend
npm run dev
```

### 2. 登录系统
- URL: `http://localhost:5173`
- 用户名: `admin`
- 密码: `admin123`

### 3. 进入SDK版本管理
- 点击左侧菜单"SDK版本管理"
- 或直接访问: `http://localhost:5173/sdk-versions`

### 4. 打开创建对话框
- 点击右上角 **"发布新版本"** 按钮
- 应该看到一个800px宽的对话框

### 5. 填写测试数据

#### 测试数据1: 有效数据
```
版本号: 2.2.0
更新类型: 可选更新
下载地址: https://cdn.sunbay.com/sdk/v2.2.0.apk
文件大小: 16777216
MD5校验值: a1b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4
最低API版本: v1
最高API版本: v2
发布说明: 本次更新包括性能优化和bug修复，提升了NFC读卡速度。
```

#### 测试数据2: 测试验证（应该失败）
```
版本号: 1.2  (错误：缺少PATCH)
MD5校验值: abc123  (错误：不足32位)
下载地址: not-a-url  (错误：无效URL)
发布说明: 短  (错误：少于10字符)
```

### 6. 提交测试
- 点击 **"发布"** 按钮
- 观察loading状态
- 等待成功消息
- 确认对话框关闭
- 确认列表刷新

## 预期结果

### ✅ 成功场景
1. 表单验证通过
2. 显示"SDK版本创建成功"消息
3. 对话框自动关闭
4. 版本列表刷新
5. 新版本出现在列表顶部

### ❌ 验证失败场景
1. 输入框下方显示红色错误提示
2. "发布"按钮可点击但提交失败
3. 显示具体的错误信息
4. 对话框保持打开
5. 数据保留在表单中

## 验证点检查

- [ ] 对话框正确打开
- [ ] 所有字段正确显示
- [ ] 版本号验证工作
- [ ] MD5验证工作
- [ ] URL验证工作
- [ ] 文件大小验证工作
- [ ] 发布说明字数验证工作
- [ ] 提交显示loading
- [ ] 成功后显示消息
- [ ] 成功后关闭对话框
- [ ] 列表自动刷新
- [ ] 取消按钮工作
- [ ] 取消后表单重置

## 常见问题

### Q: 对话框不显示？
**A**: 检查浏览器控制台是否有错误

### Q: 提交后没有反应？
**A**: 
1. 打开Network标签
2. 查看API请求
3. 检查MSW是否正常工作

### Q: 验证不工作？
**A**: 确认输入格式完全符合要求

### Q: 列表不刷新？
**A**: React Query应该自动刷新，检查useCreateSDKVersion Hook

## 截图位置

建议截图的关键界面：
1. 版本列表页（显示"发布新版本"按钮）
2. 创建对话框（空表单）
3. 创建对话框（填写数据）
4. 验证错误提示
5. 提交loading状态
6. 成功消息
7. 刷新后的列表（显示新版本）

## 完成标志

当您能够：
- ✅ 打开创建对话框
- ✅ 填写完整表单
- ✅ 成功创建版本
- ✅ 在列表中看到新版本

**功能测试通过！** 🎉
